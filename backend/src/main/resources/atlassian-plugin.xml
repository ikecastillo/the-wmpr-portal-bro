<?xml version="1.0" encoding="UTF-8"?>

<atlassian-plugin key="${atlassian.plugin.key}" name="${project.name}" plugins-version="2"> 
  <plugin-info> 
    <description>${project.description}</description>  
    <version>${project.version}</version>  
    <vendor name="${project.organization.name}" url="${project.organization.url}"/>  
  </plugin-info>
  
  <!-- Main Web Panel for Service Desk Footer -->
  <web-panel location="servicedesk.portal.footer" key="wmpr-requests-panel">
    <description>Displays recent WMPR requests in Service Desk portal</description>
    <label>WMPR Recent Requests</label>
    <resource name="view" type="velocity" location="/templates/wmpr-web-panel.vm"/>
    <!-- Include our React component web resource -->
    <dependency>com.example.wmpr.backend:entrypoint-wmprRequestsTable</dependency>
    <!-- Include custom CSS and JavaScript -->
    <dependency>com.example.wmpr.backend:wmpr-custom-styles</dependency>
    <dependency>com.example.wmpr.backend:wmpr-custom-scripts</dependency>
  </web-panel>
  
  <!-- Project Settings Web Item -->
  <web-item key="wmpr-settings-link" name="WMPR Settings" section="atl.jira.proj.config/projectgroup1" weight="40">
    <description>Configure WMPR requests settings for this project</description>
    <label>WMPR Settings</label>
    <link>/plugins/servlet/wmpr-settings?projectKey=${project.key}</link>
  </web-item>
  
  <!-- Servlet for Settings Page -->
  <servlet name="WMPR Settings Servlet" key="wmpr-settings-servlet" class="com.example.wmpr.servlet.WmprSettingsServlet">
    <description>Servlet for WMPR settings configuration</description>
    <url-pattern>/wmpr-settings</url-pattern>
  </servlet>
  
  <!-- REST Endpoint for API -->
  <rest name="WMPR Requests REST" key="wmpr-requests-rest" path="/wmpr-requests" version="1.0">
    <description>REST API for WMPR requests</description>
    <package>com.example.wmpr.rest</package>
  </rest>
  
  <!-- React Component Web Resources (Generated by Webpack) -->
  <web-resource key="entrypoint-wmprRequestsTable" name="WMPR Requests Table">
    <description>React component for displaying WMPR requests table with atlas-kit</description>
    <resource type="download" name="bundled.common-vendor.f63ca1d4.js" location="/frontend/bundled.common-vendor.f63ca1d4.js"/>
    <resource type="download" name="bundled.atlaskit-vendor.24f32894.js" location="/frontend/bundled.atlaskit-vendor.24f32894.js"/>
            <resource type="download" name="bundled.wmprRequestsTable.51b02099.js" location="/frontend/bundled.wmprRequestsTable.51b02099.js"/>
    <context>servicedesk.portal.footer</context>
    <dependency>jira.webresources:util</dependency>
  </web-resource>
  
  <web-resource key="entrypoint-wmprSettings" name="WMPR Settings">
    <description>React component for WMPR settings configuration with atlas-kit</description>
    <resource type="download" name="bundled.wmprSettings.cdeba345.js" location="/frontend/bundled.wmprSettings.cdeba345.js"/>
    <resource type="download" name="bundled.atlaskit-vendor.24f32894.js" location="/frontend/bundled.atlaskit-vendor.24f32894.js"/>
    <resource type="download" name="bundled.common-vendor.f63ca1d4.js" location="/frontend/bundled.common-vendor.f63ca1d4.js"/>
    <context>atl.general</context>
    <dependency>jira.webresources:util</dependency>
  </web-resource>
  
  <!-- Custom CSS for UI Enhancements -->
  <web-resource key="wmpr-custom-styles" name="WMPR Custom Styles">
    <description>Custom CSS for enhanced WMPR UI styling</description>
    <resource type="download" name="wmpr-custom.css" location="/css/wmpr-custom.css"/>
    <context>servicedesk.portal.footer</context>
  </web-resource>
  
  <!-- Custom JavaScript for UI Enhancements -->
  <web-resource key="wmpr-custom-scripts" name="WMPR Custom Scripts">
    <description>Custom JavaScript for enhanced WMPR UI interactions</description>
    <resource type="download" name="wmpr-custom.js" location="/js/wmpr-custom.js"/>
    <context>servicedesk.portal.footer</context>
    <dependency>com.atlassian.auiplugin:ajs</dependency>
  </web-resource>

</atlassian-plugin>
